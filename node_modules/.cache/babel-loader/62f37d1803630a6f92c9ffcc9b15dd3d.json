{"ast":null,"code":"import _slicedToArray from \"D:\\\\Github\\\\Admin_Panel\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\Github\\\\Admin_Panel\\\\src\\\\container\\\\Products\\\\Products.js\";\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport { Growl } from 'primereact/growl';\nimport MaterialTable from 'material-table';\nimport VisibilityOutlinedIcon from '@material-ui/icons/VisibilityOutlined';\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { AllAction } from '../../store/action/index';\nimport DeleteBox from '../../components/DeleteBox/DeleteBox';\nimport ErrorBox from '../../components/ErrorBox/ErrorBox';\nimport appFirebase from '../../utilities/Firebase';\n\nvar Products = function Products(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      deleteBox = _useState2[0],\n      setDeleteBox = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loadingDelete = _useState4[0],\n      setloadingDelete = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      actionCol = _useState6[0],\n      setActionCol = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      errorBox = _useState8[0],\n      setErrorBox = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      msgString = _useState10[0],\n      setMsgString = _useState10[1];\n\n  var _useState11 = useState(null),\n      _useState12 = _slicedToArray(_useState11, 2),\n      selectedList = _useState12[0],\n      setSelectedList = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      List = _useState14[0],\n      setList = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      loading = _useState16[0],\n      setLoading = _useState16[1];\n\n  var _useState17 = useState(true),\n      _useState18 = _slicedToArray(_useState17, 2),\n      AddBtn = _useState18[0],\n      setAddBtn = _useState18[1];\n\n  var _useState19 = useState({\n    Code: '',\n    ID: '',\n    SizeName: '',\n    InActive: false\n  }),\n      _useState20 = _slicedToArray(_useState19, 2),\n      property = _useState20[0],\n      updatePropert = _useState20[1];\n\n  var onClickDelete = function onClickDelete(rowData) {\n    setDeleteBox(true);\n    setSelectedList(rowData);\n    setMsgString('Are you sure want to delete ?');\n  };\n\n  var DeleteProducts = function DeleteProducts(arr, payload) {\n    var newArr = arr;\n    var index = -1;\n\n    for (var i = 0, len = newArr.length; i < len; i++) {\n      if (newArr[i].ProductsID === payload.ProductsID) {\n        index = i;\n        break;\n      }\n    }\n\n    newArr.splice(index, 1);\n    appFirebase.firestore().collection(\"companies\").doc(props.LoginRes.Res).update({\n      products: newArr\n    }).then(function (doc) {\n      setloadingDelete(false);\n      setDeleteBox(false);\n      getProductFunc();\n    }).catch(function (err) {\n      console.log({\n        err: err\n      });\n    });\n  };\n\n  var Delete = function Delete() {\n    setloadingDelete(true);\n    appFirebase.firestore().collection(\"companies\").doc(props.LoginRes.Res).get().then(function (doc) {\n      console.log({\n        data: doc.data().products\n      });\n      DeleteProducts(doc.data().products, selectedList);\n    }).catch(function (err) {\n      console.log({\n        err: err\n      });\n    }); // appFirebase.firestore().collection(\"products\").doc(ID).delete().then(()=>{\n    //     setDeleteBox(false);\n    //     props.getProductsList(props.LoginRes.Res);\n    //     setLoading(true);\n    // })\n  };\n\n  var hide = function hide() {\n    setSelectedList(null);\n    setDeleteBox(false);\n  };\n\n  var getProductFunc = function getProductFunc() {\n    appFirebase.firestore().collection(\"companies\").doc(props.LoginRes.Res).get().then(function (doc) {\n      console.log({\n        data: doc.data().products\n      });\n      setLoading(false);\n      setList(doc.data().products);\n      setList(doc.data().products);\n    }).catch(function (err) {\n      console.log({\n        err: err\n      });\n    });\n  };\n\n  useEffect(function () {\n    // props.getProductsList(props.LoginRes.Res);\n    getProductFunc();\n    setLoading(true);\n    var SuperAdmin = JSON.parse(sessionStorage.getItem('SuperAdmin'));\n\n    if (SuperAdmin !== null) {\n      window.location = \"#/access\";\n    }\n  }, []);\n  useEffect(function () {\n    if (props.error) {\n      setMsgString(props.error);\n      setLoading(false);\n      setloadingDelete(false);\n      setErrorBox(true);\n      props.AllListsNull();\n    }\n\n    if (props.ProductsListRes) {\n      props.AllListsNull();\n      setLoading(false);\n      console.log(\"ProductsListRes\", props.ProductsListRes);\n      setList(props.ProductsListRes);\n    }\n\n    ;\n\n    if (props.getProductsListNull) {\n      props.AllListsNull();\n      setLoading(false);\n      setErrorBox(true);\n      setMsgString(\"No Record Found, Please add Driver details\");\n      setAddBtn(true);\n      setList([]);\n    }\n\n    ;\n  });\n  var growl;\n\n  var addNew = function addNew() {\n    var data = {\n      newList: true,\n      viewList: false,\n      editList: false\n    };\n    props.history.push({\n      pathname: \"ProductsForm\",\n      data: data\n    });\n  };\n\n  var onEdit = function onEdit(rowData) {\n    console.log(\"rowData\", rowData);\n    var data = {\n      Products: Object.assign({}, rowData),\n      newList: false,\n      viewList: false,\n      editList: true\n    };\n    props.history.push({\n      pathname: \"ProductsForm\",\n      data: data\n    });\n  };\n\n  var addView = function addView(rowData) {\n    var data = {\n      Products: Object.assign({}, rowData),\n      newList: false,\n      viewList: true,\n      editList: false\n    };\n    props.history.push({\n      pathname: \"ProductsForm\",\n      data: data\n    });\n  };\n\n  var hideError = function hideError() {\n    setErrorBox(false);\n    setMsgString('');\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-grid p-fluid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-col-12 p-lg-12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ErrorBox, {\n    open: errorBox,\n    onClose: hideError,\n    msg: msgString,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Growl, {\n    ref: function ref(el) {\n      return growl = el;\n    },\n    position: \"topright\",\n    style: {\n      marginTop: '50px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(MaterialTable, {\n    style: {\n      padding: '10px'\n    },\n    title: /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-button\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"table-title\",\n      style: {\n        fontWeight: \"bold\",\n        fontSize: \"20px\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 29\n      }\n    }, \"Products\"), AddBtn && /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      onClick: function onClick() {\n        return addNew();\n      },\n      className: \"table-button\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 40\n      }\n    }, \"Add\", /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-plus\",\n      style: {\n        marginLeft: '10px'\n      },\n      disabled: false,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 121\n      }\n    }))),\n    isLoading: loading // columns={List.columns}\n    ,\n    data: List,\n    columns: [{\n      title: 'Product Name',\n      field: 'ProductName'\n    }, {\n      title: 'Price',\n      field: 'Price'\n    }, {\n      title: 'Available Time From',\n      field: 'AvailableTimeFrom'\n    }, {\n      title: 'Available Time To',\n      field: 'AvailableTimeTo'\n    }, {\n      title: 'Status',\n      field: 'Status'\n    }],\n    localization: {\n      body: {\n        emptyDataSourceMessage: 'No records to display',\n        filterRow: {\n          filterTooltip: 'Filter'\n        }\n      }\n    },\n    options: {\n      actionsColumnIndex: -1,\n      pageSize: 10,\n      pageSizeOptions: [5, 10, 20, 30],\n      search: true,\n      headerStyle: {\n        fontWeight: 'bold',\n        paddingLeft: '10px',\n        paddingRight: '0px',\n        paddingTop: '5px',\n        paddingBottom: '5px',\n        textAlign: 'left'\n      }\n    },\n    actions: [{\n      icon: 'edit',\n      tooltip: 'edit',\n      onClick: function onClick(event, rowData) {\n        onEdit(rowData);\n      } // disabled:this.btnEditRights === true ? false : true\n\n    }, {\n      icon: VisibilityOutlinedIcon,\n      tooltip: 'View',\n      onClick: function onClick(event, rowData) {\n        addView(rowData);\n      } // disabled:this.btnViewRights === true ? false : true\n\n    }, {\n      icon: 'delete',\n      tooltip: 'Delete',\n      onClick: function onClick(event, rowData) {\n        onClickDelete(rowData);\n      } // disabled: this.btnDeleteRights === true ? false : true\n\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(DeleteBox, {\n    open: deleteBox,\n    msg: msgString,\n    onDelete: Delete,\n    onCancel: hide,\n    loadingDelete: loadingDelete,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 17\n    }\n  })));\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    LoginRes: state.AuthReducer.LoginRes,\n    ProductsListRes: state.AllActionReducer.ProductsListRes,\n    getProductsListNull: state.AllActionReducer.getProductsListNull\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    AllListsNull: function AllListsNull() {\n      return dispatch(AllAction.AllListsNull());\n    },\n    getProductsList: function getProductsList(payload) {\n      return dispatch(AllAction.getProductsList(payload));\n    } // deleteAllLists: (payload) => dispatch(AllAction.deleteAllLists(payload)),\n\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Products);","map":{"version":3,"sources":["D:/Github/Admin_Panel/src/container/Products/Products.js"],"names":["React","useState","useEffect","useRef","connect","Growl","MaterialTable","VisibilityOutlinedIcon","Button","Checkbox","AllAction","DeleteBox","ErrorBox","appFirebase","Products","props","deleteBox","setDeleteBox","loadingDelete","setloadingDelete","actionCol","setActionCol","errorBox","setErrorBox","msgString","setMsgString","selectedList","setSelectedList","List","setList","loading","setLoading","AddBtn","setAddBtn","Code","ID","SizeName","InActive","property","updatePropert","onClickDelete","rowData","DeleteProducts","arr","payload","newArr","index","i","len","length","ProductsID","splice","firestore","collection","doc","LoginRes","Res","update","products","then","getProductFunc","catch","err","console","log","Delete","get","data","hide","SuperAdmin","JSON","parse","sessionStorage","getItem","window","location","error","AllListsNull","ProductsListRes","getProductsListNull","growl","addNew","newList","viewList","editList","history","push","pathname","onEdit","Object","assign","addView","hideError","el","marginTop","padding","fontWeight","fontSize","marginLeft","title","field","body","emptyDataSourceMessage","filterRow","filterTooltip","actionsColumnIndex","pageSize","pageSizeOptions","search","headerStyle","paddingLeft","paddingRight","paddingTop","paddingBottom","textAlign","icon","tooltip","onClick","event","mapStateToProps","state","AuthReducer","AllActionReducer","mapDispatchToProps","dispatch","getProductsList"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,MAArC,QAAmD,OAAnD;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,OAAOC,aAAP,MAA0B,gBAA1B;AACA,OAAOC,sBAAP,MAAmC,uCAAnC;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,SAASC,SAAT,QAA0B,0BAA1B;AACA,OAAOC,SAAP,MAAsB,sCAAtB;AACA,OAAOC,QAAP,MAAqB,oCAArB;AACA,OAAOC,WAAP,MAAwB,0BAAxB;;AACA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,KAAD,EAAW;AAAA,kBAEUd,QAAQ,CAAC,KAAD,CAFlB;AAAA;AAAA,MAEjBe,SAFiB;AAAA,MAENC,YAFM;;AAAA,mBAGkBhB,QAAQ,CAAC,KAAD,CAH1B;AAAA;AAAA,MAGjBiB,aAHiB;AAAA,MAGFC,gBAHE;;AAAA,mBAIUlB,QAAQ,CAAC,EAAD,CAJlB;AAAA;AAAA,MAIjBmB,SAJiB;AAAA,MAINC,YAJM;;AAAA,mBAMQpB,QAAQ,CAAC,KAAD,CANhB;AAAA;AAAA,MAMjBqB,QANiB;AAAA,MAMPC,WANO;;AAAA,mBAOUtB,QAAQ,CAAC,EAAD,CAPlB;AAAA;AAAA,MAOjBuB,SAPiB;AAAA,MAONC,YAPM;;AAAA,oBAQgBxB,QAAQ,CAAC,IAAD,CARxB;AAAA;AAAA,MAQjByB,YARiB;AAAA,MAQHC,eARG;;AAAA,oBASA1B,QAAQ,CAAC,EAAD,CATR;AAAA;AAAA,MASjB2B,IATiB;AAAA,MASXC,OATW;;AAAA,oBAUM5B,QAAQ,CAAC,KAAD,CAVd;AAAA;AAAA,MAUjB6B,OAViB;AAAA,MAURC,UAVQ;;AAAA,oBAWI9B,QAAQ,CAAC,IAAD,CAXZ;AAAA;AAAA,MAWjB+B,MAXiB;AAAA,MAWTC,SAXS;;AAAA,oBAaUhC,QAAQ,CAAC;AACvCiC,IAAAA,IAAI,EAAE,EADiC;AAEvCC,IAAAA,EAAE,EAAE,EAFmC;AAGvCC,IAAAA,QAAQ,EAAE,EAH6B;AAIvCC,IAAAA,QAAQ,EAAE;AAJ6B,GAAD,CAblB;AAAA;AAAA,MAajBC,QAbiB;AAAA,MAaPC,aAbO;;AAqBxB,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,OAAD,EAAa;AAC/BxB,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACAU,IAAAA,eAAe,CAACc,OAAD,CAAf;AACAhB,IAAAA,YAAY,CAAC,+BAAD,CAAZ;AAEH,GALD;;AAOA,MAAMiB,cAAc,GAAC,SAAfA,cAAe,CAACC,GAAD,EAAMC,OAAN,EAAgB;AAE7B,QAAIC,MAAM,GAAGF,GAAb;AAGA,QAAIG,KAAK,GAAG,CAAC,CAAb;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAGH,MAAM,CAACI,MAA7B,EAAqCF,CAAC,GAAGC,GAAzC,EAA8CD,CAAC,EAA/C,EAAmD;AAC/C,UAAIF,MAAM,CAACE,CAAD,CAAN,CAAUG,UAAV,KAAyBN,OAAO,CAACM,UAArC,EAAiD;AAC7CJ,QAAAA,KAAK,GAAGC,CAAR;AACA;AACH;AACJ;;AAGDF,IAAAA,MAAM,CAACM,MAAP,CAAcL,KAAd,EAAoB,CAApB;AACAjC,IAAAA,WAAW,CAACuC,SAAZ,GAAwBC,UAAxB,CAAmC,WAAnC,EAAgDC,GAAhD,CAAoDvC,KAAK,CAACwC,QAAN,CAAeC,GAAnE,EAAwEC,MAAxE,CAA+E;AAC3EC,MAAAA,QAAQ,EAAEb;AADiE,KAA/E,EAGIc,IAHJ,CAGS,UAACL,GAAD,EAAS;AACVnC,MAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACAF,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACA2C,MAAAA,cAAc;AAEjB,KARL,EAQOC,KARP,CAQa,UAACC,GAAD,EAAS;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAY;AAAEF,QAAAA,GAAG,EAAHA;AAAF,OAAZ;AACH,KAVL;AAYH,GA3BL;;AA6BA,MAAMG,MAAM,GAAG,SAATA,MAAS,GAAM;AACjB9C,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AAGAN,IAAAA,WAAW,CAACuC,SAAZ,GAAwBC,UAAxB,CAAmC,WAAnC,EAAgDC,GAAhD,CAAoDvC,KAAK,CAACwC,QAAN,CAAeC,GAAnE,EAAwEU,GAAxE,GACAP,IADA,CACK,UAACL,GAAD,EAAS;AACVS,MAAAA,OAAO,CAACC,GAAR,CAAY;AAAEG,QAAAA,IAAI,EAAEb,GAAG,CAACa,IAAJ,GAAWT;AAAnB,OAAZ;AACAhB,MAAAA,cAAc,CAAGY,GAAG,CAACa,IAAJ,GAAWT,QAAd,EAAwBhC,YAAxB,CAAd;AAGH,KAND,EAMGmC,KANH,CAMS,UAACC,GAAD,EAAS;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAY;AAAEF,QAAAA,GAAG,EAAHA;AAAF,OAAZ;AACH,KARD,EAJiB,CAkBjB;AACA;AACA;AACA;AACA;AACH,GAvBD;;AAwBA,MAAMM,IAAI,GAAG,SAAPA,IAAO,GAAM;AACfzC,IAAAA,eAAe,CAAC,IAAD,CAAf;AACAV,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACH,GAHD;;AAMA,MAAM2C,cAAc,GAAG,SAAjBA,cAAiB,GAAO;AAE1B/C,IAAAA,WAAW,CAACuC,SAAZ,GAAwBC,UAAxB,CAAmC,WAAnC,EAAgDC,GAAhD,CAAoDvC,KAAK,CAACwC,QAAN,CAAeC,GAAnE,EAAwEU,GAAxE,GACIP,IADJ,CACS,UAACL,GAAD,EAAS;AACVS,MAAAA,OAAO,CAACC,GAAR,CAAY;AAAEG,QAAAA,IAAI,EAAEb,GAAG,CAACa,IAAJ,GAAWT;AAAnB,OAAZ;AACA3B,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAF,MAAAA,OAAO,CAAEyB,GAAG,CAACa,IAAJ,GAAWT,QAAb,CAAP;AACA7B,MAAAA,OAAO,CAACyB,GAAG,CAACa,IAAJ,GAAWT,QAAZ,CAAP;AACH,KANL,EAMOG,KANP,CAMa,UAACC,GAAD,EAAS;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAY;AAAEF,QAAAA,GAAG,EAAHA;AAAF,OAAZ;AACH,KARL;AAUH,GAZD;;AAaA5D,EAAAA,SAAS,CAAC,YAAM;AACZ;AACA0D,IAAAA,cAAc;AACd7B,IAAAA,UAAU,CAAC,IAAD,CAAV;AACA,QAAIsC,UAAU,GAAGC,IAAI,CAACC,KAAL,CAAWC,cAAc,CAACC,OAAf,CAAuB,YAAvB,CAAX,CAAjB;;AACA,QAAIJ,UAAU,KAAK,IAAnB,EAAyB;AACrBK,MAAAA,MAAM,CAACC,QAAP,GAAkB,UAAlB;AACH;AAEJ,GATQ,EASN,EATM,CAAT;AAWAzE,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAIa,KAAK,CAAC6D,KAAV,EAAiB;AACbnD,MAAAA,YAAY,CAACV,KAAK,CAAC6D,KAAP,CAAZ;AACA7C,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAZ,MAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACAI,MAAAA,WAAW,CAAC,IAAD,CAAX;AAGAR,MAAAA,KAAK,CAAC8D,YAAN;AACH;;AAGD,QAAI9D,KAAK,CAAC+D,eAAV,EAA2B;AACvB/D,MAAAA,KAAK,CAAC8D,YAAN;AACA9C,MAAAA,UAAU,CAAC,KAAD,CAAV;AAEAgC,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA8BjD,KAAK,CAAC+D,eAApC;AACAjD,MAAAA,OAAO,CAACd,KAAK,CAAC+D,eAAP,CAAP;AAEC;;AAAA;;AAED,QAAI/D,KAAK,CAACgE,mBAAV,EAA+B;AAC3BhE,MAAAA,KAAK,CAAC8D,YAAN;AACA9C,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAR,MAAAA,WAAW,CAAC,IAAD,CAAX;AACAE,MAAAA,YAAY,CAAC,4CAAD,CAAZ;AACAQ,MAAAA,SAAS,CAAC,IAAD,CAAT;AACAJ,MAAAA,OAAO,CAAC,EAAD,CAAP;AAEC;;AAAA;AAGZ,GAhCQ,CAAT;AAiCA,MAAImD,KAAJ;;AAEA,MAAMC,MAAM,GAAG,SAATA,MAAS,GAAM;AACjB,QAAId,IAAI,GAAG;AAEPe,MAAAA,OAAO,EAAE,IAFF;AAGPC,MAAAA,QAAQ,EAAE,KAHH;AAIPC,MAAAA,QAAQ,EAAE;AAJH,KAAX;AAMArE,IAAAA,KAAK,CAACsE,OAAN,CAAcC,IAAd,CAAmB;AACfC,MAAAA,QAAQ,EAAE,cADK;AAEfpB,MAAAA,IAAI,EAACA;AAFU,KAAnB;AAOH,GAdD;;AAeA,MAAMqB,MAAM,GAAG,SAATA,MAAS,CAAC/C,OAAD,EAAa;AACxBsB,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAsBvB,OAAtB;AACA,QAAI0B,IAAI,GAAG;AACPrD,MAAAA,QAAQ,EAAE2E,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBjD,OAAlB,CADH;AAEPyC,MAAAA,OAAO,EAAE,KAFF;AAGPC,MAAAA,QAAQ,EAAE,KAHH;AAIPC,MAAAA,QAAQ,EAAE;AAJH,KAAX;AAOArE,IAAAA,KAAK,CAACsE,OAAN,CAAcC,IAAd,CAAmB;AACfC,MAAAA,QAAQ,EAAE,cADK;AAEfpB,MAAAA,IAAI,EAACA;AAFU,KAAnB;AAOH,GAhBD;;AAmBA,MAAMwB,OAAO,GAAG,SAAVA,OAAU,CAAClD,OAAD,EAAa;AACzB,QAAI0B,IAAI,GAAG;AACPrD,MAAAA,QAAQ,EAAE2E,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBjD,OAAlB,CADH;AAEPyC,MAAAA,OAAO,EAAE,KAFF;AAGPC,MAAAA,QAAQ,EAAE,IAHH;AAIPC,MAAAA,QAAQ,EAAE;AAJH,KAAX;AAOArE,IAAAA,KAAK,CAACsE,OAAN,CAAcC,IAAd,CAAmB;AACfC,MAAAA,QAAQ,EAAE,cADK;AAEfpB,MAAAA,IAAI,EAACA;AAFU,KAAnB;AAOH,GAfD;;AAgBA,MAAMyB,SAAS,GAAG,SAAZA,SAAY,GAAM;AACpBrE,IAAAA,WAAW,CAAC,KAAD,CAAX;AACAE,IAAAA,YAAY,CAAC,EAAD,CAAZ;AACH,GAHD;;AAKA,sBACI;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,QAAD;AAAU,IAAA,IAAI,EAAEH,QAAhB;AAA0B,IAAA,OAAO,EAAEsE,SAAnC;AAA8C,IAAA,GAAG,EAAEpE,SAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAEI,oBAAC,KAAD;AAAO,IAAA,GAAG,EAAE,aAACqE,EAAD;AAAA,aAAQb,KAAK,GAAGa,EAAhB;AAAA,KAAZ;AAAgC,IAAA,QAAQ,EAAC,UAAzC;AAAoD,IAAA,KAAK,EAAE;AAAEC,MAAAA,SAAS,EAAE;AAAb,KAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,eAII,oBAAC,aAAD;AACI,IAAA,KAAK,EAAE;AACHC,MAAAA,OAAO,EAAE;AADN,KADX;AAII,IAAA,KAAK,eAED;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAM,MAAA,SAAS,EAAC,aAAhB;AAA8B,MAAA,KAAK,EAAE;AAAEC,QAAAA,UAAU,EAAE,MAAd;AAAsBC,QAAAA,QAAQ,EAAE;AAAhC,OAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,EAEKjE,MAAM,iBAAI,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,WAAhB;AAA4B,MAAA,OAAO,EAAE;AAAA,eAAMiD,MAAM,EAAZ;AAAA,OAArC;AAAqD,MAAA,SAAS,EAAC,cAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAiF;AAAG,MAAA,SAAS,EAAC,YAAb;AAA0B,MAAA,KAAK,EAAE;AAAEiB,QAAAA,UAAU,EAAE;AAAd,OAAjC;AAAyD,MAAA,QAAQ,EAAE,KAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAjF,CAFf,CANR;AAYI,IAAA,SAAS,EAAEpE,OAZf,CAaI;AAbJ;AAcI,IAAA,IAAI,EAAEF,IAdV;AAeI,IAAA,OAAO,EAAE,CACL;AAAEuE,MAAAA,KAAK,EAAE,cAAT;AAAyBC,MAAAA,KAAK,EAAE;AAAhC,KADK,EAGL;AAAED,MAAAA,KAAK,EAAE,OAAT;AAAkBC,MAAAA,KAAK,EAAE;AAAzB,KAHK,EAIL;AAAED,MAAAA,KAAK,EAAE,qBAAT;AAAgCC,MAAAA,KAAK,EAAE;AAAvC,KAJK,EAKL;AAAED,MAAAA,KAAK,EAAE,mBAAT;AAA8BC,MAAAA,KAAK,EAAE;AAArC,KALK,EAQL;AAAED,MAAAA,KAAK,EAAE,QAAT;AAAmBC,MAAAA,KAAK,EAAE;AAA1B,KARK,CAfb;AAyBI,IAAA,YAAY,EAAE;AACVC,MAAAA,IAAI,EAAE;AACFC,QAAAA,sBAAsB,EAAE,uBADtB;AAEFC,QAAAA,SAAS,EAAE;AACPC,UAAAA,aAAa,EAAE;AADR;AAFT;AADI,KAzBlB;AAiCI,IAAA,OAAO,EAAE;AACLC,MAAAA,kBAAkB,EAAE,CAAC,CADhB;AAELC,MAAAA,QAAQ,EAAE,EAFL;AAGLC,MAAAA,eAAe,EAAE,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,EAAY,EAAZ,CAHZ;AAILC,MAAAA,MAAM,EAAE,IAJH;AAKLC,MAAAA,WAAW,EAAE;AAETb,QAAAA,UAAU,EAAE,MAFH;AAGTc,QAAAA,WAAW,EAAE,MAHJ;AAITC,QAAAA,YAAY,EAAE,KAJL;AAKTC,QAAAA,UAAU,EAAE,KALH;AAMTC,QAAAA,aAAa,EAAE,KANN;AAOTC,QAAAA,SAAS,EAAE;AAPF;AALR,KAjCb;AAiDI,IAAA,OAAO,EAAE,CACL;AACIC,MAAAA,IAAI,EAAE,MADV;AAEIC,MAAAA,OAAO,EAAE,MAFb;AAGIC,MAAAA,OAAO,EAAE,iBAACC,KAAD,EAAQ7E,OAAR,EAAoB;AACzB+C,QAAAA,MAAM,CAAC/C,OAAD,CAAN;AACH,OALL,CAMI;;AANJ,KADK,EASL;AACI0E,MAAAA,IAAI,EAAE5G,sBADV;AAEI6G,MAAAA,OAAO,EAAE,MAFb;AAGIC,MAAAA,OAAO,EAAE,iBAACC,KAAD,EAAQ7E,OAAR,EAAoB;AACzBkD,QAAAA,OAAO,CAAClD,OAAD,CAAP;AACH,OALL,CAMI;;AANJ,KATK,EAiBL;AACI0E,MAAAA,IAAI,EAAE,QADV;AAEIC,MAAAA,OAAO,EAAE,QAFb;AAGIC,MAAAA,OAAO,EAAE,iBAACC,KAAD,EAAQ7E,OAAR,EAAoB;AACzBD,QAAAA,aAAa,CAACC,OAAD,CAAb;AACH,OALL,CAMI;;AANJ,KAjBK,CAjDb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,eAgFI,oBAAC,SAAD;AAAW,IAAA,IAAI,EAAEzB,SAAjB;AAA4B,IAAA,GAAG,EAAEQ,SAAjC;AAA4C,IAAA,QAAQ,EAAEyC,MAAtD;AAA8D,IAAA,QAAQ,EAAEG,IAAxE;AAA8E,IAAA,aAAa,EAAElD,aAA7F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAhFJ,CADJ,CADJ;AAsFH,CA/RD;;AAiSA,IAAMqG,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD,EAAW;AAC/B,SAAO;AACHjE,IAAAA,QAAQ,EAAEiE,KAAK,CAACC,WAAN,CAAkBlE,QADzB;AAEHuB,IAAAA,eAAe,EAAG0C,KAAK,CAACE,gBAAN,CAAuB5C,eAFtC;AAGHC,IAAAA,mBAAmB,EAACyC,KAAK,CAACE,gBAAN,CAAuB3C;AAHxC,GAAP;AAMH,CAPD;;AASA,IAAM4C,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,QAAD,EAAc;AACrC,SAAO;AAEH/C,IAAAA,YAAY,EAAE;AAAA,aAAM+C,QAAQ,CAAClH,SAAS,CAACmE,YAAV,EAAD,CAAd;AAAA,KAFX;AAIHgD,IAAAA,eAAe,EAAE,yBAACjF,OAAD;AAAA,aAAagF,QAAQ,CAAClH,SAAS,CAACmH,eAAV,CAA0BjF,OAA1B,CAAD,CAArB;AAAA,KAJd,CAKH;;AALG,GAAP;AAQH,CATD;;AAWA,eAAexC,OAAO,CAACmH,eAAD,EAAkBI,kBAAlB,CAAP,CAA6C7G,QAA7C,CAAf","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Growl } from 'primereact/growl';\r\nimport MaterialTable from 'material-table';\r\nimport VisibilityOutlinedIcon from '@material-ui/icons/VisibilityOutlined';\r\nimport Button from '@material-ui/core/Button';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport { AllAction } from '../../store/action/index';\r\nimport DeleteBox from '../../components/DeleteBox/DeleteBox';\r\nimport ErrorBox from '../../components/ErrorBox/ErrorBox';\r\nimport appFirebase from '../../utilities/Firebase';\r\nconst Products = (props) => {\r\n\r\n    const [deleteBox, setDeleteBox] = useState(false);\r\n    const [loadingDelete, setloadingDelete] = useState(false);\r\n    const [actionCol, setActionCol] = useState([]);\r\n\r\n    const [errorBox, setErrorBox] = useState(false);\r\n    const [msgString, setMsgString] = useState('');\r\n    const [selectedList, setSelectedList] = useState(null);\r\n    const [List, setList] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [AddBtn, setAddBtn] = useState(true);\r\n    \r\n    const [property, updatePropert] = useState({\r\n        Code: '',\r\n        ID: '',\r\n        SizeName: '',\r\n        InActive: false\r\n    })\r\n\r\n\r\n    const onClickDelete = (rowData) => {\r\n        setDeleteBox(true);\r\n        setSelectedList(rowData)\r\n        setMsgString('Are you sure want to delete ?');\r\n\r\n    }\r\n\r\n    const DeleteProducts=(arr, payload)=>{\r\n        \r\n            let newArr = arr\r\n            \r\n    \r\n            var index = -1;\r\n            for (var i = 0, len = newArr.length; i < len; i++) {\r\n                if (newArr[i].ProductsID === payload.ProductsID) {\r\n                    index = i;\r\n                    break;\r\n                }\r\n            }\r\n            \r\n    \r\n            newArr.splice(index,1)\r\n            appFirebase.firestore().collection(\"companies\").doc(props.LoginRes.Res).update({\r\n                products: newArr\r\n            }).\r\n                then((doc) => {\r\n                    setloadingDelete(false);\r\n                    setDeleteBox(false);\r\n                    getProductFunc()\r\n                     \r\n                }).catch((err) => {\r\n                    console.log({ err })\r\n                })\r\n    \r\n        }\r\n     \r\n    const Delete = () => {\r\n        setloadingDelete(true)\r\n        \r\n\r\n        appFirebase.firestore().collection(\"companies\").doc(props.LoginRes.Res).get().\r\n        then((doc) => {\r\n            console.log({ data: doc.data().products })\r\n            DeleteProducts(  doc.data().products, selectedList )\r\n            \r\n           \r\n        }).catch((err) => {\r\n            console.log({ err })\r\n        })\r\n\r\n\r\n\r\n\r\n       \r\n        // appFirebase.firestore().collection(\"products\").doc(ID).delete().then(()=>{\r\n        //     setDeleteBox(false);\r\n        //     props.getProductsList(props.LoginRes.Res);\r\n        //     setLoading(true);\r\n        // })\r\n    }\r\n    const hide = () => {\r\n        setSelectedList(null);\r\n        setDeleteBox(false);\r\n    }\r\n\r\n\r\n    const getProductFunc = ( ) => {\r\n       \r\n        appFirebase.firestore().collection(\"companies\").doc(props.LoginRes.Res).get().\r\n            then((doc) => {\r\n                console.log({ data: doc.data().products })\r\n                setLoading(false);\r\n                setList( doc.data().products)\r\n                setList(doc.data().products)\r\n            }).catch((err) => {\r\n                console.log({ err })\r\n            })\r\n\r\n    }\r\n    useEffect(() => {\r\n        // props.getProductsList(props.LoginRes.Res);\r\n        getProductFunc()\r\n        setLoading(true);\r\n        let SuperAdmin = JSON.parse(sessionStorage.getItem('SuperAdmin'));\r\n        if (SuperAdmin !== null) {\r\n            window.location = \"#/access\";\r\n        }\r\n\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (props.error) {\r\n            setMsgString(props.error);\r\n            setLoading(false);\r\n            setloadingDelete(false)\r\n            setErrorBox(true);\r\n\r\n\r\n            props.AllListsNull()\r\n        }\r\n\r\n      \r\n        if (props.ProductsListRes) {\r\n            props.AllListsNull()\r\n            setLoading(false);\r\n\r\n            console.log(\"ProductsListRes\",props.ProductsListRes)\r\n            setList(props.ProductsListRes)\r\n           \r\n            };\r\n\r\n            if (props.getProductsListNull) {\r\n                props.AllListsNull()\r\n                setLoading(false);\r\n                setErrorBox(true);\r\n                setMsgString(\"No Record Found, Please add Driver details\");\r\n                setAddBtn(true)\r\n                setList([])\r\n               \r\n                };\r\n            \r\n     \r\n    })\r\n    let growl;\r\n\r\n    const addNew = () => {\r\n        let data = {\r\n           \r\n            newList: true,\r\n            viewList: false,\r\n            editList: false\r\n        }\r\n        props.history.push({\r\n            pathname: \"ProductsForm\",\r\n            data:data\r\n        })\r\n\r\n\r\n\r\n    }\r\n    const onEdit = (rowData) => {\r\n        console.log(\"rowData\",rowData)\r\n        let data = {\r\n            Products: Object.assign({}, rowData),\r\n            newList: false,\r\n            viewList: false,\r\n            editList: true\r\n        }\r\n\r\n        props.history.push({\r\n            pathname: \"ProductsForm\",\r\n            data:data,\r\n        })\r\n      \r\n\r\n           \r\n    }\r\n\r\n    \r\n    const addView = (rowData) => {\r\n        let data = {\r\n            Products: Object.assign({}, rowData),\r\n            newList: false,\r\n            viewList: true,\r\n            editList: false\r\n        }\r\n\r\n        props.history.push({\r\n            pathname: \"ProductsForm\",\r\n            data:data,\r\n        })\r\n      \r\n\r\n           \r\n    }\r\n    const hideError = () => {\r\n        setErrorBox(false);\r\n        setMsgString('');\r\n    }\r\n\r\n    return (\r\n        <div className=\"p-grid p-fluid\" >\r\n            <div className=\"p-col-12 p-lg-12\">\r\n                <ErrorBox open={errorBox} onClose={hideError} msg={msgString} />\r\n                <Growl ref={(el) => growl = el} position=\"topright\" style={{ marginTop: '50px' }} />\r\n\r\n                <MaterialTable\r\n                    style={{\r\n                        padding: '10px'\r\n                    }}\r\n                    title=\r\n                    {\r\n                        <div className=\"table-button\" >\r\n                            <span className=\"table-title\" style={{ fontWeight: \"bold\", fontSize: \"20px\" }}>Products</span>\r\n                            {AddBtn && <Button variant=\"contained\" onClick={() => addNew()} className=\"table-button\">Add<i className=\"fa fa-plus\" style={{ marginLeft: '10px' }} disabled={false}></i></Button>}\r\n\r\n                        </div>\r\n                    }\r\n                    isLoading={loading}\r\n                    // columns={List.columns}\r\n                    data={List}\r\n                    columns={[\r\n                        { title: 'Product Name', field: 'ProductName' },\r\n                       \r\n                        { title: 'Price', field: 'Price' },\r\n                        { title: 'Available Time From', field: 'AvailableTimeFrom' },\r\n                        { title: 'Available Time To', field: 'AvailableTimeTo' },\r\n\r\n                       \r\n                        { title: 'Status', field: 'Status' }, ]}\r\n                  \r\n                    localization={{\r\n                        body: {\r\n                            emptyDataSourceMessage: 'No records to display',\r\n                            filterRow: {\r\n                                filterTooltip: 'Filter'\r\n                            }\r\n                        }\r\n                    }}\r\n                    options={{\r\n                        actionsColumnIndex: -1,\r\n                        pageSize: 10,\r\n                        pageSizeOptions: [5, 10, 20, 30],\r\n                        search: true,\r\n                        headerStyle: {\r\n\r\n                            fontWeight: 'bold',\r\n                            paddingLeft: '10px',\r\n                            paddingRight: '0px',\r\n                            paddingTop: '5px',\r\n                            paddingBottom: '5px',\r\n                            textAlign: 'left'\r\n\r\n                        }\r\n                    }}\r\n                    actions={[\r\n                        {\r\n                            icon: 'edit',\r\n                            tooltip: 'edit',\r\n                            onClick: (event, rowData) => {\r\n                                onEdit(rowData);\r\n                            },\r\n                            // disabled:this.btnEditRights === true ? false : true\r\n                        },\r\n                        {\r\n                            icon: VisibilityOutlinedIcon,\r\n                            tooltip: 'View',\r\n                            onClick: (event, rowData) => {\r\n                                addView(rowData);\r\n                            },\r\n                            // disabled:this.btnViewRights === true ? false : true\r\n                        },\r\n                        {\r\n                            icon: 'delete',\r\n                            tooltip: 'Delete',\r\n                            onClick: (event, rowData) => {\r\n                                onClickDelete(rowData)\r\n                            },\r\n                            // disabled: this.btnDeleteRights === true ? false : true\r\n                        },\r\n                    ]}\r\n                />\r\n                <DeleteBox open={deleteBox} msg={msgString} onDelete={Delete} onCancel={hide} loadingDelete={loadingDelete} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        LoginRes: state.AuthReducer.LoginRes,\r\n        ProductsListRes:  state.AllActionReducer.ProductsListRes,\r\n        getProductsListNull:state.AllActionReducer.getProductsListNull\r\n       \r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n\r\n        AllListsNull: () => dispatch(AllAction.AllListsNull()),\r\n\r\n        getProductsList: (payload) => dispatch(AllAction.getProductsList(payload)),\r\n        // deleteAllLists: (payload) => dispatch(AllAction.deleteAllLists(payload)),\r\n\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Products);"]},"metadata":{},"sourceType":"module"}